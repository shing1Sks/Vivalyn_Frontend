# Changelog

## [11] agent-live-ui — 2026-02-23

**Why:** Agents could be configured and saved but had no way to be run by end-users. Admins needed a way to mark an agent live (or pause it) and share a direct link. External users needed a video-call-style interface to interact with a deployed agent via voice. Internal members needed a test link that bypasses the live/idle restriction so they can validate the agent before going live.

**What:** Added the complete agent live interaction layer: a public `/agent/:agentId` route with a video-call-style UI (animated agent avatar, real-time transcript panel, session controls), a `useAgentSession` hook managing WebSocket + mic + TTS audio, and AgentCard updates in the AgentSpace with Live/Idle status badge, Go Live toggle, and copy-link buttons.

**Changes:**
- `src/lib/api.ts` — added `agent_status: 'live' | 'idle'` to `Agent` interface; added `AgentPublicConfig` interface (`agent_name`, `agent_language`, `agent_status`); added `fetchAgentPublicConfig(agentId)` (no auth, `GET /api/v1/agents/{id}/public-config`); added `toggleAgentStatus(token, agentId, status)` (`PATCH /api/v1/agents/{id}/status`)
- `src/App.tsx` — added `/agent/:agentId` route pointing to `AgentLive` (no auth wrapper — public)
- `src/hooks/useAgentSession.ts` — **new**; manages full session lifecycle: WebSocket connection (`wss://.../ws/agent/{id}/session?email&name&mode&token`), mic capture (`AudioContext` 16kHz, `ScriptProcessorNode` bufferSize=1024, Float32→Int16 PCM binary frames), TTS playback (`AudioContext` 24kHz, gapless `BufferSource` scheduling via `nextPlayTimeRef`); state machine: `phase` (`connecting`→`active`→`ended`/`error`) + `agentState` (`listening`/`thinking`/`speaking`); React Strict Mode safe — uses `let mounted = true` per-effect guard so double-invoke in dev does not corrupt state; all handlers (`onmessage`, `onerror`, `onclose`) check `if (!mounted) return`; `session_ready` guards `ctx.resume()` with `state === 'suspended'` check and re-checks `mounted` after the `await`; `cleanup()` is idempotent (nulls all refs); `audio_done` polls `ctx.currentTime >= nextPlayTimeRef.current` to re-enable mic only after scheduled audio has finished; `sendAudioRef` stops mic sending during agent speaking to prevent echo; exposes `phase`, `agentState`, `transcript`, `micEnabled`, `toggleMic`, `endSession`, `error`
- `src/pages/AgentLive.tsx` — **new**; page state machine `loading → entry → session → ended / error`; loading: calls `fetchAgentPublicConfig`, blocks if live mode + `agent_status !== 'live'`; test mode: redirects to `/auth?next=/agent/${agentId}?mode=test` if no auth session; `ActiveSession` inner component mounts `useAgentSession` once join details are known — isolates hook from page-level re-renders; two-panel session layout: `SessionScreen` (flex-1) + `TranscriptPanel` (w-72 fixed RHS)
- `src/components/agentlive/AgentAvatar.tsx` — **new**; 120px circle with agent initials; `listening`: soft indigo pulse ring (Framer Motion scale+opacity loop); `thinking`: spinning dashed gray ring (`animate={{ rotate: 360 }}`); `speaking`: two expanding emerald rings with staggered delay
- `src/components/agentlive/SessionScreen.tsx` — **new**; video-call layout: sticky header (agent name + Live/Test badge), centered `AgentAvatar` with status label ("Listening…" / "Thinking…" / "Speaking"), live session timer via `useElapsed()` hook, mic toggle button, red End Call button (`PhoneOff` icon)
- `src/components/agentlive/TranscriptPanel.tsx` — **new**; scrollable RHS column; user messages: right-aligned indigo-600 bubbles (`rounded-br-sm`); agent messages: left-aligned white bordered bubbles (`rounded-bl-sm`); `AnimatePresence` + `fadeInUp` per entry; auto-scrolls to bottom via `bottomRef`
- `src/components/agentlive/EntryScreen.tsx` — **new**; centered card (`max-w-sm`); live mode shows email + name inputs; test mode shows name only (email from auth session); "Join Session" primary button calls `onJoin(email, name)` callback
- `src/components/agentlive/EndedScreen.tsx` — **new**; thank-you screen with `CheckCircle` icon, exchange count, and "transcript saved" notice
- `src/pages/AgentSpace.tsx` — updated `AgentCard`: new imports (`Check`, `Copy`, `Link2`, `ToggleLeft`, `ToggleRight`; `toggleAgentStatus`); `AgentCard` now accepts `userRole`, `token`, `onStatusChange` props; **status badge** always visible in card header (emerald-50/emerald-600 when live, gray-100/gray-400 when idle with 1.5px dot); **admin-only deploy section** below card body: Go Live toggle (`ToggleRight`/`ToggleLeft`), "Copy Live Link" button (indigo-600 filled), "Copy Test Link" button (ghost border); `handleToggleStatus` calls `toggleAgentStatus` then `onStatusChange(updated)` on success; `copyLink` writes to `navigator.clipboard` and shows "Copied!" for 2s via local state

---

## [10] voice-ui-abstraction — 2026-02-23

**Why:** Wavenet voice codes like `en-US-Wavenet-E` were leaking into the voice picker UI — users had no reason to see them. The abstraction layer (persona names like "Emma", "Ryan") already existed in `voiceConfig.ts` but the voice cards still displayed the raw internal code. Additionally the 2-column voice grid left each card mostly empty, wasting vertical space when 4 cards fit comfortably in a single row.

**What:** Removed all Wavenet code rendering from voice cards. Redesigned each card to show the persona name, a gender badge (♀/♂), and a PREF_LABELS subtitle ("Female 1", "Male 1", etc.). Switched both voice grids from 2-col to 4-col. Updated `api.ts` to drop the now-unused `tts_language_code` field from `LanguageVoiceOption`. The `voice_name` (Wavenet code) is still transported in the API payload and saved to the DB — it is simply never rendered.

**Changes:**
- `src/lib/api.ts` — removed `tts_language_code` from `LanguageVoiceOption` interface (field was unused by the frontend); `VoiceOption.voice_name` kept as the internal Wavenet code (not displayed in UI, used to populate `agent_voice` on save)
- `src/components/agentspace/wizard/LanguageVoiceSelector.tsx` — added `PREF_LABELS` import from `./voiceConfig`; removed `voice_name` display span; redesigned voice card: persona name (`getVoiceName`) + gender badge (`♀`/`♂`, pink-50/sky-50 colors, indigo-100 when active) + `PREF_LABELS[voice.preference]` subtitle; Preview button now full-width; grid changed `grid-cols-2 → grid-cols-4`; `selectedVoiceName` still derived from `voice.voice_name` for the `onContinue` payload
- `src/components/agentspace/wizard/AgentConfigureView.tsx` — added `PREF_LABELS` import; removed `voice_name` display span; voice card redesign matches `LanguageVoiceSelector`; grid changed `grid-cols-2 → grid-cols-4`; `applyCurrentPref()` still matches by `v.voice_name === agentVoice` to correctly pre-select the current voice

---

## [9] agent-configure-view-redesign — 2026-02-23

**Why:** The initial `AgentConfigureView` squeezed content with a bottom AI button, had no way to change voice/language post-creation, used a uniform grid with poor visual hierarchy, had no collapsible sections for the list fields, clipped content on scroll, and was unusable on mobile.

**What:** Full redesign of `AgentConfigureView` with a sticky header, an inline `VoiceBar` for changing voice/language, a responsive two-column layout (LHS: string sections, RHS: collapsible list sections), a floating AI rewrite popover per section header, thin custom scrollbars globally, and full mobile responsiveness.

**Changes:**
- `src/index.css` — added global thin webkit scrollbar CSS: 4 px wide, transparent track, gray-200 thumb with rounded pill shape
- `src/components/agentspace/wizard/voiceConfig.ts` — **new**; shared constants file (`FLAG_MAP`, `VOICE_NAMES`, `PREF_LABELS`, `getVoiceName()`); extracted from `LanguageVoiceSelector.tsx` to satisfy the `react-refresh/only-export-components` lint rule that forbids non-component exports from component files
- `src/components/agentspace/wizard/LanguageVoiceSelector.tsx` — removed local constant definitions; imports `FLAG_MAP`, `getVoiceName` from `./voiceConfig`
- `src/components/agentspace/wizard/AgentConfigureView.tsx` — full rewrite:
  - **Props extended**: `agentLanguage: string`, `agentVoice: string`, `onAgentUpdated?: (updates: { agent_language, agent_voice }) => void`
  - **Header**: sticky `top-0 z-10` bar; on mobile scales to `text-sm`, `px-3 py-1.5 text-xs` button, subtitle hidden; on desktop restores full size
  - **VoiceBar** sub-component: info row shows flag emoji + persona name (extracted from `voice_character.name` via `/Your name is (.+?)\.?\s*$/` regex, falls back to `getVoiceName(lang, 'female1')`) + language subtitle; "Change Voice" expands an `AnimatePresence` drawer; drawer has a language `<select>` populated from `fetchVoices()` (cached after first open) + 4 voice cards with persona names, audio play/stop preview, active state in indigo; "Update Voice" calls `updateAgent()` with `agent_language`, `agent_voice`, and updated `voice_character`; pre-selects the current voice on open by matching stored wavenet voice name to preference key from the API response
  - **StringSection** sub-component: white bordered card with a header row (label + AI sparkle button) + `<textarea>` with `resize-none`
  - **CollapsibleSection** sub-component: header `<button>` toggles `AnimatePresence` height animation (`height: 0 → auto`); AI button uses `e.stopPropagation()` to avoid toggling; numbered list items with individual textareas
  - **AiButton** sub-component: `relative` container; sparkle button opens a floating popover (`w-72 max-w-[calc(100vw-2.5rem)]`, `absolute right-0 top-9 z-20`); instruction input + submit + close; calls `rewriteAgentSection()` on submit
  - **Two-column body**: `flex flex-col md:flex-row md:items-start`; LHS `w-full md:w-[55%]` with Identity & Persona (rows=10) + Task Definition (rows=7); RHS `flex-1` with Objectives (defaultOpen=true), Transcript (defaultOpen=false), Guardrails (defaultOpen=false); separator is `border-b md:border-b-0 md:border-r border-gray-100`
  - **Scroll model**: root is `min-h-full` (no overflow constraint); parent in `AgentSpace.tsx` is `overflow-y-auto`; sticky header pins correctly with this model
- `src/lib/api.ts` — added `updateAgent(token, agentId, updates)` for partial PATCH (`agent_prompt?`, `agent_language?`, `agent_voice?`); `updateAgentPrompt` now delegates to `updateAgent`
- `src/pages/AgentSpace.tsx` — configure overlay is `fixed inset-0 z-50 bg-white flex flex-col` with a 56 px top bar (back button left, agent name centred, close button right) and `flex-1 overflow-y-auto` body; `AgentConfigureView` receives `agentLanguage`, `agentVoice`, `onAgentUpdated`; `onAgentUpdated` updates both `configuringAgent` and `agents` list in-place

---

## [8] agent-creation-wizard — 2026-02-22

**Why:** Users needed a guided flow to create voice training agents from scratch — choose a language and voice, describe what the agent should do, let the AI plan all 5 prompt sections sequentially (asking clarifying questions only when meaningful), review and edit the compiled spec, then save.

**What:** Added the full agent creation pipeline: a multi-step wizard modal, a linear planner flow UI that shows section-by-section progress with inline Q&A, a language+voice selector with audio preview, and a post-compile configure step for review before saving. API layer wired to all new backend endpoints. Agent list grid with agent cards added to the AgentSpace page.

**Changes:**
- `src/lib/api.ts` — added `VoiceOption`, `LanguageVoiceOption` interfaces; added 7 API functions: `fetchVoices()` (`GET /voices`), `fetchVoicePreviewBlob(language, pref)` (`GET /voices/{lang}/{pref}/preview`), `planAgentSection(token, payload)` (`POST /agents/plan-section`), `compileAgentPlan(token, payload)` (`POST /agents/compile`), `rewriteAgentSection(token, payload)` (`POST /agents/rewrite-section`), `saveAgent(token, agentspaceId, payload)` (`POST /agentspaces/{id}/agents`), `fetchAgents(token, agentspaceId)` (`GET /agentspaces/{id}/agents`); added interfaces `AgentPromptSpec`, `PlanQuestion`, `PlanSectionResult`, `CompileResult`, `Agent`
- `src/components/agentspace/wizard/LanguageVoiceSelector.tsx` — **new**; searchable language grid (flag emoji + display name, 34 languages); collapses after selection; 4 voice cards per language showing WaveNet persona name, play/stop audio preview via blob URL + `<audio>` element with cancellation token pattern; active voice highlighted in indigo; "Continue" enabled only when both language and voice chosen; calls `onContinue(language, voicePreference, voiceName, personaName)`
- `src/components/agentspace/wizard/PlannerFlow.tsx` — **new**; progress display consumed during the planning phase; renders all 5 sections with status icons (`pending` ring, `planning` spinner, `needs_input` amber `?` badge, `done` green check); when `needs_input`, shows question text + 2 suggestion chips + free-text input; auto-scrolls to bottom as sections update
- `src/components/agentspace/CreateAgentWizard.tsx` — **new**; 6-step modal (`language-voice` → `prompt-input` → `planning` → `compiling` → `done` → `configure`); dot progress bar for the first 4 steps; `runPlanningPipeline()` iterates the 5 sections linearly — calls `planAgentSection()`, waits for user answers if `need_user_inputs`, appends to `plan_history`, then calls `compileAgentPlan()`; `handleAnswerQuestion()` appends `Q/A` lines to `plan_history` and resumes the pipeline; success screen with "Configure" (opens inline `AgentConfigureView`) and "Done" actions; slide transitions via `AnimatePresence`
- `src/pages/AgentSpace.tsx` — added `agents`, `agentsLoading`, `configuringAgent` state; `useEffect` fetches agents on active-space change; added `AgentCard` sub-component (bot icon, agent name, language badge, persona name, wavenet voice in monospace, creator + relative date, Configure + Deploy buttons — Deploy disabled with "Soon" badge); `EmptyAgentsState` sub-component; `extractPersonaName()` and `formatRelativeDate()` helpers; agent grid `grid-cols-1 md:grid-cols-2 lg:grid-cols-3`; `CreateAgentWizard` mounted with `agentspaceId`; `handleWizardClose()` refetches agents after wizard closes

---

## [7] agentspace-management-system — 2026-02-21

**Why:** Users needed a full invite-based membership system — admins invite people by email, invitees get a branded email, click the link, sign in if needed, and accept to join. Admins needed a settings panel to manage members and invites. Users needed an inbox for invites sent to them.

**What:** Added the complete frontend layer: settings panel (members + invites management), inbox panel, invite accept page, API functions, header updates, and auth redirect support. Bell icon highlights only when there are pending invites.

**Changes:**
- `src/lib/api.ts` — added `AgentSpaceMember` and `Invite` interfaces; added 9 API functions: `fetchAgentSpaceMembers`, `changeAgentSpaceMemberRole`, `removeAgentSpaceMember`, `fetchAgentSpaceInvites`, `createInvite`, `revokeInvite`, `fetchInboxInvites`, `fetchInviteDetails` (no auth token), `acceptInvite`
- `src/App.tsx` — added `/invite/:inviteId` route pointing to new `InviteAccept` page
- `src/pages/Auth.tsx` — reads `?next=` query param via `useLocation`; after successful login/signup navigates to `next` if present instead of always going to `/agent-space`
- `src/pages/InviteAccept.tsx` — **new**; public page at `/invite/:inviteId`; fetches invite details without auth; handles states: loading, not found, expired/revoked, already accepted, pending+not-logged-in ("Sign in to accept" → `/auth?next=/invite/{id}`), pending+logged-in+email-mismatch, pending+logged-in+match (Accept button); on accept auto-redirects to `/agent-space` after 2 s
- `src/components/agentspace/AgentSpaceSettingsPanel.tsx` — **new**; right slide-out panel (max-w-440, `x: 100%→0` animation); Members tab with `MemberRow` (role dropdown + remove button, self-actions disabled) and Invites tab with send form (email + role select) and `InviteRow` (status badge + revoke button); admin-only
- `src/components/agentspace/InboxPanel.tsx` — **new**; right slide-out panel (max-w-420); `InviteCard` per invite with status badge, `timeAgo` timestamp, and Accept button for pending valid invites; on accept updates local state + calls `refetchSpaces()`; exports `usePendingInviteCount()` hook for the header badge
- `src/components/agentspace/AgentSpaceHeader.tsx` — added `onSettingsClick` and `onInboxClick` props; added `usePendingInviteCount` hook; bell button color is conditional (`pendingCount > 0` → indigo, else gray) with dot badge when pending; Settings button enabled only when `activeSpace?.role === 'admin'`
- `src/pages/AgentSpace.tsx` — added `settingsOpen` and `inboxOpen` state; wired both props to `AgentSpaceHeader`; renders `<AgentSpaceSettingsPanel>` and `<InboxPanel>`

---

## [6] profile-name-auth-hardening — 2026-02-20

**Why:** Three related gaps needed closing: (1) the signup form had no name field so email-signup users had empty `name` in their profile; (2) the `UserProfile` type didn't include `name`/`email` even though the backend now returns them; (3) a deleted Supabase user still appeared logged in because `getSession()` reads localStorage without server validation, and a stale agentspace ID in localStorage could cause the app to render a phantom profile. Additionally, first-time users could briefly see the "no agentspace" empty state due to a race between the profile-creation fetch and the agentspace fetch.

**What:** Added a name field to the signup form (hidden in login mode). Hardened the auth flow so a stale or invalid session is automatically cleared on the first API call. Sequenced agentspace loading to wait for profile fetch completion (profile creation also creates the default agentspace). Replaced the empty-agentspace CTA with a "Setting up your agentspace…" loader that auto-retries as a safety net.

**Changes:**
- `src/lib/api.ts` — added `name` and `email` to `UserProfile` interface; added `ApiError` class (extends `Error`, carries `status: number`); `fetchProfile` now throws `ApiError` instead of a plain `Error` so callers can inspect the HTTP status
- `src/context/AuthContext.tsx` — `signUpWithEmail` accepts a third `name` param; passes it as `options.data.full_name` to `supabase.auth.signUp` so name lands in `user_metadata` for profile creation to pick up
- `src/context/ProfileContext.tsx` — destructures `signOut` from `useAuth`; on `fetchProfile` failure, checks `e instanceof ApiError && e.status === 401` and calls `signOut()` to clear the stale localStorage session and redirect to auth; other errors still console-error only
- `src/context/AgentSpaceContext.tsx` — imports `useProfile`; `loadSpaces` bails early while `profileLoading` is true so agentspace fetch only fires after profile creation (and its default agentspace creation) completes; `profileLoading` added to `useCallback` deps
- `src/pages/Auth.tsx` — added `name` state; Name input field rendered only when `mode === 'signup'` (above Email); `switchMode` resets `name`; `signUpWithEmail` called with `name` as third arg
- `src/pages/AgentSpace.tsx` — `AgentSpaceContent` now reads `spaces` and `refetchSpaces` from context; added `useRef` retry counter (`retryCount`, max 5) with a `useEffect` that calls `refetchSpaces()` after 1500 ms whenever spaces are empty post-load (safety net for edge cases); replaced "You have no AgentSpaces / Create your first" empty state with a centered `Loader2` spinner + "Setting up your agentspace…" text

---

## [5] agentspace-management — 2026-02-20

**Why:** Users needed a workspace UI to organise agents. Each user gets one default AgentSpace on first login; they can create more. The app needed a dedicated in-app environment (no landing nav/footer) with a Supabase-style switcher so users can move between spaces.

**What:** Added the full AgentSpace management layer: API functions, a scoped context with localStorage persistence, a Supabase-style space switcher, a create-space modal, a custom header, and a redesigned AgentSpace page. The switcher lives in the top-left of a new per-page header; the last-used space is restored from `localStorage` on every visit.

**Changes:**
- `src/lib/api.ts` — added `AgentSpace` interface, `CreateAgentSpacePayload` interface, `fetchAgentSpaces(token)` (`GET /api/v1/agentspaces`), `createAgentSpace(token, payload)` (`POST /api/v1/agentspaces`); error detail extracted from FastAPI `detail` field on failure
- `src/context/AgentSpaceContext.tsx` — new; `AgentSpaceProvider` scoped to the AgentSpace page only (not global); fetches spaces on `session.access_token` change; restores active space from `localStorage` key `vivalyn_last_agentspace_id`, falling back to `spaces[0]`; exposes `spaces`, `activeSpace`, `spacesLoading`, `spacesError`, `switchSpace(id)`, `createSpace(payload)`, `refetchSpaces()` via `useAgentSpace()` hook; `createSpace` appends optimistically and switches immediately
- `src/components/agentspace/AgentSpaceSwitcher.tsx` — new; trigger button shows active space name with animated rotating `ChevronDown`; `AnimatePresence` panel (`opacity 0→1, y -4→0`, 150 ms) lists all spaces with an `Orbit` icon, active space highlighted in `indigo-50` with a `Check` icon; "New AgentSpace" button at the bottom in indigo; outside-click closes via `useRef + mousedown`
- `src/components/agentspace/CreateAgentSpaceModal.tsx` — new; `AnimatePresence` modal with blurred backdrop and scale+translate entrance (200 ms); single name input with `maxLength=80`, `autoFocus`; `Create` button disabled while name empty or submitting, shows `Loader2` spinner; error message displayed below input; resets state on close
- `src/components/agentspace/AgentSpaceHeader.tsx` — new; 64 px sticky header replacing the landing `Header` on this route; left side: logo button (`./icon.png` + "Vivalyn" wordmark) navigating to `/` on click, `/` separator, `AgentSpaceSwitcher`; right side: `Settings` icon (disabled, `opacity-40`, `cursor-not-allowed`, title "Settings (coming soon)") + `UserAvatar sm` with sign-out dropdown
- `src/pages/AgentSpace.tsx` — replaced; two-component pattern: outer `AgentSpace` handles auth guard and wraps `AgentSpaceProvider`; inner `AgentSpaceContent` consumes context, owns `createOpen` state; renders loading spinner, error message, active-space name with role subtitle, or empty-state CTA depending on context state; `staggerContainer + fadeInUp` animation on main content; `CreateAgentSpaceModal` always mounted, toggled by `createOpen`

---

## [4] profile-api-integration — 2026-02-19

**Why:** The avatar in the header and agent-space page was a hardcoded indigo circle with an email initial. Needed a real profile backed by the backend — showing the OAuth provider photo for Google/Microsoft users, and a unique gradient avatar for email users.

**What:** Added a backend API layer and a `ProfileContext` that fetches-or-creates the user's profile on login. Built a reusable `UserAvatar` component that renders the provider photo if available, falling back to the stored gradient with the email initial. Wired it into the header dropdown and the agent-space welcome screen.

**Changes:**
- `.env.example` — added `VITE_BACKEND_URL=http://localhost:8000`
- `src/lib/api.ts` — new; `fetchProfile(accessToken)` — typed fetch to `GET /api/v1/profile/me` using the Supabase access token as a Bearer header; exports `UserProfile` interface
- `src/context/ProfileContext.tsx` — new; `ProfileProvider` watches `session.access_token` from `AuthContext`, calls `fetchProfile` on login, clears on sign-out; exposes `profile` and `profileLoading` via `useProfile()` hook
- `src/components/ui/UserAvatar.tsx` — new; renders `<img referrerPolicy="no-referrer">` when `profile_pic_link` exists, otherwise a `<div>` with the stored CSS gradient and the first initial of the email; supports `sm` / `md` / `lg` sizes
- `src/main.tsx` — added `ProfileProvider` inside `AuthProvider`
- `src/components/layout/Header.tsx` — replaced hardcoded indigo avatar button with `UserAvatar size="sm"`; added `useProfile()` import
- `src/pages/AgentSpace.tsx` — replaced hardcoded indigo avatar `motion.div` with `UserAvatar size="md"`; added `useProfile()` import

---

## [3] supabase-auth — 2026-02-18

**Why:** The app needed user authentication to gate CTA actions (sign up, sign in) and prepare for user-specific features like a dashboard.

**What:** Added Supabase authentication supporting email/password, Google OAuth, and Microsoft Azure OAuth. Introduced React Router for multi-page routing, a global auth context, a login/signup page with animated form and OAuth buttons, and a simple protected dashboard. Header and CTA buttons now reflect auth state — showing "Sign in" when logged out and a user avatar dropdown when logged in.

**Changes:**
- `.env.example` — new; Supabase URL and anon key placeholders
- `src/lib/supabase.ts` — new; Supabase client singleton with env var validation
- `src/context/AuthContext.tsx` — new; React Context providing user/session state, email sign-in/sign-up, Google/Microsoft OAuth, sign-out, and `useAuth()` hook
- `src/pages/Landing.tsx` — new; extracted landing page content from App.tsx
- `src/pages/Auth.tsx` — new; login/signup page with tab toggle, Google & Microsoft OAuth buttons, email/password form, Framer Motion animations, subtle gradient background
- `src/pages/Dashboard.tsx` — new; protected welcome page with user avatar, email display, and sign-out
- `src/App.tsx` — replaced section composition with React Router routes (`/`, `/auth`, `/dashboard`)
- `src/main.tsx` — wrapped app with `BrowserRouter` and `AuthProvider`
- `src/components/layout/Header.tsx` — "Sign in" button navigates to `/auth`; logged-in users see initial avatar with dropdown (email + sign out); nav links prepend `/` when off landing page
- `src/sections/Hero.tsx` — "Request pilot pricing" renamed to "Get started free", navigates to `/auth`
- `src/sections/CTASection.tsx` — primary button renamed to "Get started" with auth gate; secondary button remains "Book a demo"

---

## [2] pricing-section — 2026-02-16

**Why:** Landing page needed a pricing section to communicate plan options for both Indian and international users, with a free trial available on a demo-request basis.

**What:** Added a Pricing section with an India/International region toggle, 5 pricing tiers (Trial, Starter, Growth, Pro, Business), and animated card transitions. Pro plan is highlighted as "Most Popular". Trial tier uses a "Request Demo" CTA instead of direct signup.

**Changes:**
- `src/lib/constants.ts` — added `PricingPlan` interface, `PRICING_PLANS_IN` and `PRICING_PLANS_INTL` data arrays
- `src/sections/Pricing.tsx` — new; region toggle, 5-column pricing card grid with AnimatePresence transitions, per-session cost, bonus credits, and "Contact sales" footer
- `src/App.tsx` — added `<Pricing />` section between ReportPreview and SocialProof

---

## [1] landing-page-v1 — 2026-02-16

**Why:** Vivalyn needed a public-facing landing page to communicate the product value prop (AI training & assessment agents), capture demo leads, and establish brand presence following the YC-grade clean SaaS design system defined in `UI.md`.

**What:** Built the complete landing page from a fresh React + Vite setup. Configured Tailwind CSS v4, Framer Motion, Lucide React, and Inter font. Created 6 reusable UI components, 2 layout components, and 9 landing page sections. Hero section features animated mock product UI cycling through 3 scenarios (Sales, Support, Education) with progress bar tabs.

**Changes:**
- `vite.config.ts` — added `@tailwindcss/vite` plugin
- `index.html` — added Inter font preconnect, SEO meta, updated title
- `src/index.css` — replaced with Tailwind v4 import + `@theme` for Inter font
- `src/App.tsx` — rewritten to compose all landing page sections
- `src/App.css` — deleted (all styling via Tailwind now)
- `src/lib/motion.ts` — new; shared Framer Motion variants (fadeInUp, staggerContainer)
- `src/lib/constants.ts` — new; all static data (nav links, features, steps, FAQs, metrics, testimonials, footer links)
- `src/components/ui/Button.tsx` — new; Primary/Secondary/Ghost variants
- `src/components/ui/Badge.tsx` — new; indigo-50 pill badge
- `src/components/ui/Card.tsx` — new; bordered card with hover lift
- `src/components/ui/SectionWrapper.tsx` — new; max-width + section padding wrapper
- `src/components/ui/Logo.tsx` — new; "Vivalyn" text logo with indigo icon
- `src/components/ui/Accordion.tsx` — new; FAQ expand/collapse with AnimatePresence
- `src/components/layout/Header.tsx` — new; sticky 72px header with blur backdrop, nav links, mobile hamburger
- `src/components/layout/Footer.tsx` — new; 4-column links grid + copyright
- `src/sections/Hero.tsx` — new; 2-column hero with animated scenario cycling (Sales/Support/Education), mock report card, transcript, progress bar tabs
- `src/sections/ProblemStatement.tsx` — new; centered narrow copy block
- `src/sections/SolutionSummary.tsx` — new; "What we do" section
- `src/sections/FeatureGrid.tsx` — new; 3-column card grid with Coming Soon badges
- `src/sections/HowItWorks.tsx` — new; 3-step horizontal timeline with connector line
- `src/sections/ReportPreview.tsx` — new; mock assessment report + feature bullet list
- `src/sections/SocialProof.tsx` — new; metrics banner, partner logos, testimonial cards
- `src/sections/FAQ.tsx` — new; 5 accordion items
- `src/sections/CTASection.tsx` — new; indigo-600 rounded container with inverted CTA
