# Changelog

## [4] profile-api-integration — 2026-02-19

**Why:** The avatar in the header and agent-space page was a hardcoded indigo circle with an email initial. Needed a real profile backed by the backend — showing the OAuth provider photo for Google/Microsoft users, and a unique gradient avatar for email users.

**What:** Added a backend API layer and a `ProfileContext` that fetches-or-creates the user's profile on login. Built a reusable `UserAvatar` component that renders the provider photo if available, falling back to the stored gradient with the email initial. Wired it into the header dropdown and the agent-space welcome screen.

**Changes:**
- `.env.example` — added `VITE_BACKEND_URL=http://localhost:8000`
- `src/lib/api.ts` — new; `fetchProfile(accessToken)` — typed fetch to `GET /api/v1/profile/me` using the Supabase access token as a Bearer header; exports `UserProfile` interface
- `src/context/ProfileContext.tsx` — new; `ProfileProvider` watches `session.access_token` from `AuthContext`, calls `fetchProfile` on login, clears on sign-out; exposes `profile` and `profileLoading` via `useProfile()` hook
- `src/components/ui/UserAvatar.tsx` — new; renders `<img referrerPolicy="no-referrer">` when `profile_pic_link` exists, otherwise a `<div>` with the stored CSS gradient and the first initial of the email; supports `sm` / `md` / `lg` sizes
- `src/main.tsx` — added `ProfileProvider` inside `AuthProvider`
- `src/components/layout/Header.tsx` — replaced hardcoded indigo avatar button with `UserAvatar size="sm"`; added `useProfile()` import
- `src/pages/AgentSpace.tsx` — replaced hardcoded indigo avatar `motion.div` with `UserAvatar size="md"`; added `useProfile()` import

---

## [3] supabase-auth — 2026-02-18

**Why:** The app needed user authentication to gate CTA actions (sign up, sign in) and prepare for user-specific features like a dashboard.

**What:** Added Supabase authentication supporting email/password, Google OAuth, and Microsoft Azure OAuth. Introduced React Router for multi-page routing, a global auth context, a login/signup page with animated form and OAuth buttons, and a simple protected dashboard. Header and CTA buttons now reflect auth state — showing "Sign in" when logged out and a user avatar dropdown when logged in.

**Changes:**
- `.env.example` — new; Supabase URL and anon key placeholders
- `src/lib/supabase.ts` — new; Supabase client singleton with env var validation
- `src/context/AuthContext.tsx` — new; React Context providing user/session state, email sign-in/sign-up, Google/Microsoft OAuth, sign-out, and `useAuth()` hook
- `src/pages/Landing.tsx` — new; extracted landing page content from App.tsx
- `src/pages/Auth.tsx` — new; login/signup page with tab toggle, Google & Microsoft OAuth buttons, email/password form, Framer Motion animations, subtle gradient background
- `src/pages/Dashboard.tsx` — new; protected welcome page with user avatar, email display, and sign-out
- `src/App.tsx` — replaced section composition with React Router routes (`/`, `/auth`, `/dashboard`)
- `src/main.tsx` — wrapped app with `BrowserRouter` and `AuthProvider`
- `src/components/layout/Header.tsx` — "Sign in" button navigates to `/auth`; logged-in users see initial avatar with dropdown (email + sign out); nav links prepend `/` when off landing page
- `src/sections/Hero.tsx` — "Request pilot pricing" renamed to "Get started free", navigates to `/auth`
- `src/sections/CTASection.tsx` — primary button renamed to "Get started" with auth gate; secondary button remains "Book a demo"

---

## [2] pricing-section — 2026-02-16

**Why:** Landing page needed a pricing section to communicate plan options for both Indian and international users, with a free trial available on a demo-request basis.

**What:** Added a Pricing section with an India/International region toggle, 5 pricing tiers (Trial, Starter, Growth, Pro, Business), and animated card transitions. Pro plan is highlighted as "Most Popular". Trial tier uses a "Request Demo" CTA instead of direct signup.

**Changes:**
- `src/lib/constants.ts` — added `PricingPlan` interface, `PRICING_PLANS_IN` and `PRICING_PLANS_INTL` data arrays
- `src/sections/Pricing.tsx` — new; region toggle, 5-column pricing card grid with AnimatePresence transitions, per-session cost, bonus credits, and "Contact sales" footer
- `src/App.tsx` — added `<Pricing />` section between ReportPreview and SocialProof

---

## [1] landing-page-v1 — 2026-02-16

**Why:** Vivalyn needed a public-facing landing page to communicate the product value prop (AI training & assessment agents), capture demo leads, and establish brand presence following the YC-grade clean SaaS design system defined in `UI.md`.

**What:** Built the complete landing page from a fresh React + Vite setup. Configured Tailwind CSS v4, Framer Motion, Lucide React, and Inter font. Created 6 reusable UI components, 2 layout components, and 9 landing page sections. Hero section features animated mock product UI cycling through 3 scenarios (Sales, Support, Education) with progress bar tabs.

**Changes:**
- `vite.config.ts` — added `@tailwindcss/vite` plugin
- `index.html` — added Inter font preconnect, SEO meta, updated title
- `src/index.css` — replaced with Tailwind v4 import + `@theme` for Inter font
- `src/App.tsx` — rewritten to compose all landing page sections
- `src/App.css` — deleted (all styling via Tailwind now)
- `src/lib/motion.ts` — new; shared Framer Motion variants (fadeInUp, staggerContainer)
- `src/lib/constants.ts` — new; all static data (nav links, features, steps, FAQs, metrics, testimonials, footer links)
- `src/components/ui/Button.tsx` — new; Primary/Secondary/Ghost variants
- `src/components/ui/Badge.tsx` — new; indigo-50 pill badge
- `src/components/ui/Card.tsx` — new; bordered card with hover lift
- `src/components/ui/SectionWrapper.tsx` — new; max-width + section padding wrapper
- `src/components/ui/Logo.tsx` — new; "Vivalyn" text logo with indigo icon
- `src/components/ui/Accordion.tsx` — new; FAQ expand/collapse with AnimatePresence
- `src/components/layout/Header.tsx` — new; sticky 72px header with blur backdrop, nav links, mobile hamburger
- `src/components/layout/Footer.tsx` — new; 4-column links grid + copyright
- `src/sections/Hero.tsx` — new; 2-column hero with animated scenario cycling (Sales/Support/Education), mock report card, transcript, progress bar tabs
- `src/sections/ProblemStatement.tsx` — new; centered narrow copy block
- `src/sections/SolutionSummary.tsx` — new; "What we do" section
- `src/sections/FeatureGrid.tsx` — new; 3-column card grid with Coming Soon badges
- `src/sections/HowItWorks.tsx` — new; 3-step horizontal timeline with connector line
- `src/sections/ReportPreview.tsx` — new; mock assessment report + feature bullet list
- `src/sections/SocialProof.tsx` — new; metrics banner, partner logos, testimonial cards
- `src/sections/FAQ.tsx` — new; 5 accordion items
- `src/sections/CTASection.tsx` — new; indigo-600 rounded container with inverted CTA
